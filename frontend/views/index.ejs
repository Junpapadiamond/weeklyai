<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeeklyAI - å‘ç°æœ¬å‘¨æœ€çƒ­é—¨çš„AIäº§å“</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Unbounded:wght@400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
</head>

<body>
    <!-- èƒŒæ™¯è£…é¥° -->
    <div class="bg-decoration">
        <div class="bg-gradient-1"></div>
        <div class="bg-gradient-2"></div>
        <div class="bg-grid"></div>
    </div>

    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <span class="logo-icon"><i data-lucide="sparkles"></i></span>
                <span class="logo-text">WeeklyAI</span>
            </div>
            <div class="nav-links">
                <a href="#" class="nav-link active" data-section="trending"><span class="nav-icon"><i
                            data-lucide="flame"></i></span>é»‘é©¬æ¨è</a>
                <a href="#" class="nav-link" data-section="weekly"><span class="nav-icon"><i
                            data-lucide="trending-up"></i></span>æœ¬å‘¨æ¦œå•</a>
                <a href="#" class="nav-link" data-section="leaders"><span class="nav-icon"><i
                            data-lucide="trophy"></i></span>è¡Œä¸šé¢†å†›</a>
                <a href="#" class="nav-link" data-section="blogs"><span class="nav-icon"><i
                            data-lucide="newspaper"></i></span>åšå®¢åŠ¨æ€</a>
                <a href="#" class="nav-link" data-section="search"><span class="nav-icon"><i
                            data-lucide="search"></i></span>æœç´¢</a>
            </div>
            <button class="theme-toggle" id="themeToggle" title="åˆ‡æ¢ä¸»é¢˜" aria-label="åˆ‡æ¢æ·±è‰²/æµ…è‰²æ¨¡å¼">
                <i data-lucide="sun" class="theme-icon-light"></i>
                <i data-lucide="moon" class="theme-icon-dark" style="display: none;"></i>
            </button>
        </div>
    </nav>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="main-content">
        <!-- Hero åŒºåŸŸ -->
        <section class="hero">
            <div class="hero-art" aria-hidden="true">
                <div id="hero-canvas"></div>
            </div>
            <div class="hero-layout">
                <div class="hero-content">
                    <div class="hero-kicker">æœ¬å‘¨ç²¾é€‰ Â· AI ç”Ÿæ€çƒ­åº¦å›¾</div>
                    <h1 class="hero-title">
                        å‘ç°å…¨çƒæœ€ç«çš„
                        <span class="gradient-text">AI äº§å“</span>
                    </h1>
                    <p class="hero-subtitle">æ¯å‘¨æ›´æ–° Â· è½¯ä»¶ & ç¡¬ä»¶ Â· ä¸“ä¸šç­›é€‰</p>
                    <div class="data-freshness" id="dataFreshness" aria-live="polite">ğŸ“¡ æ•°æ®æ›´æ–°ä¸­...</div>
                    <!-- æœç´¢æ¡† -->
                    <div class="search-container">
                        <div class="search-box">
                            <input type="search" id="searchInput" placeholder="æœç´¢ AI äº§å“..." aria-label="æœç´¢ AI äº§å“">
                            <button class="search-btn" id="searchBtn">
                                <span>æœç´¢</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========== ä¸Šï¼šæœ¬å‘¨é»‘é©¬ (4-5åˆ†ç²¾é€‰) ========== -->
        <section class="section darkhorse-section" id="darkhorseSection">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="title-icon"><i data-lucide="flame"></i></span>
                    æœ¬å‘¨é»‘é©¬
                    <span class="score-badge score-badge--5">4-5åˆ†</span>
                </h2>
                <p class="section-desc">æœ¬å‘¨æœ€å€¼å¾—å…³æ³¨çš„é«˜æ½œåŠ› AI äº§å“</p>
            </div>
            <!-- ç¡¬ä»¶/è½¯ä»¶ç­›é€‰ -->
            <div class="darkhorse-filters" id="darkhorseFilters">
                <button class="filter-btn active" data-type="all">å…¨éƒ¨</button>
                <button class="filter-btn" data-type="hardware"><span class="nav-icon"><i
                            data-lucide="cpu"></i></span>ç¡¬ä»¶</button>
                <button class="filter-btn" data-type="software"><span class="nav-icon"><i
                            data-lucide="code"></i></span>è½¯ä»¶</button>
            </div>
            <div class="darkhorse-grid" id="darkhorseProducts">
                <!-- é»‘é©¬äº§å“å°†é€šè¿‡ JS åŠ¨æ€åŠ è½½ -->
                <div class="loading-skeleton">
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                </div>
            </div>
        </section>

        <!-- ========== ä¸­ï¼šå¿«é€Ÿå‘ç° (åˆ†ç±»ç­›é€‰) ========== -->
        <section class="section discovery-section" id="discoverSection">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="title-icon"><i data-lucide="zap"></i></span>
                    å¿«é€Ÿå‘ç°
                </h2>
                <p class="section-desc">å‘å³æ”¶è— Â· å‘å·¦è·³è¿‡ Â· æ¨èä¼šè‡ªç„¶æ”¶æ•›</p>
            </div>
            <!-- åˆ†ç±»ç­›é€‰æ ‡ç­¾ -->
            <div class="discover-filters" id="discoverFilters">
                <button class="discover-filter-btn active" data-category="all">å…¨éƒ¨</button>
                <button class="discover-filter-btn" data-category="hardware"><span class="nav-icon"><i
                            data-lucide="cpu"></i></span>ç¡¬ä»¶</button>
                <button class="discover-filter-btn" data-category="coding"><span class="nav-icon"><i
                            data-lucide="code"></i></span>ç¼–ç¨‹</button>
                <button class="discover-filter-btn" data-category="agent"><span class="nav-icon"><i
                            data-lucide="bot"></i></span>Agent</button>
                <button class="discover-filter-btn" data-category="image"><span class="nav-icon"><i
                            data-lucide="image"></i></span>å›¾åƒ</button>
                <button class="discover-filter-btn" data-category="video"><span class="nav-icon"><i
                            data-lucide="film"></i></span>è§†é¢‘</button>
                <button class="discover-filter-btn" data-category="voice"><span class="nav-icon"><i
                            data-lucide="mic"></i></span>è¯­éŸ³</button>
            </div>
            <div class="discover-shell">
                <div class="swipe-stack" id="swipeStack" aria-live="polite"></div>
                <div class="swipe-actions">
                    <button class="swipe-btn swipe-btn--nope" id="swipeNope">è·³è¿‡</button>
                    <button class="swipe-btn swipe-btn--like" id="swipeLike">æ”¶è—</button>
                </div>
                <div class="swipe-status" id="swipeStatus">å·²æ”¶è— 0 Â· å·²è·³è¿‡ 0</div>
            </div>
        </section>

        <!-- ========== ä¸‹ï¼šæ›´å¤šæ¨è (é»‘é©¬ + æ½œåŠ›è‚¡) ========== -->
        <section class="section trending-section" id="trendingSection">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="title-icon"><i data-lucide="trending-up"></i></span>
                    æ›´å¤šæ¨è
                </h2>
                <p class="section-desc">é»‘é©¬ (4-5åˆ†) + æ½œåŠ›è‚¡ (2-3åˆ†)</p>
            </div>
            <!-- Sort/Filter Controls -->
            <div class="list-controls" id="trendingControls">
                <div class="tier-tabs" id="tierTabs">
                    <button class="tier-tab active" data-tier="all">å…¨éƒ¨</button>
                    <button class="tier-tab" data-tier="darkhorse"><span class="nav-icon"><i
                                data-lucide="flame"></i></span>é»‘é©¬ (4-5åˆ†)</button>
                    <button class="tier-tab" data-tier="rising"><span class="nav-icon"><i
                                data-lucide="star"></i></span>æ½œåŠ›è‚¡ (2-3åˆ†)</button>
                </div>
                <div class="controls-right">
                    <div class="sort-control">
                        <label for="sortBy">æ’åº:</label>
                        <select id="sortBy" class="sort-select">
                            <option value="score">ğŸ”¥ çƒ­åº¦</option>
                            <option value="date">ğŸ• æœ€æ–°</option>
                            <option value="funding">ğŸ’° èèµ„</option>
                        </select>
                    </div>
                    <div class="filter-control">
                        <label for="typeFilter">ç±»å‹:</label>
                        <select id="typeFilter" class="filter-select">
                            <option value="all">å…¨éƒ¨</option>
                            <option value="software">ğŸ’» è½¯ä»¶</option>
                            <option value="hardware">ğŸ”§ ç¡¬ä»¶</option>
                        </select>
                    </div>
                    <button class="favorites-toggle" id="showFavoritesBtn" title="æ˜¾ç¤ºæ”¶è—">
                        <span class="favorites-icon">â¤ï¸</span>
                        <span class="favorites-count" id="favoritesCount">0</span>
                    </button>
                </div>
            </div>
            <div class="products-grid" id="trendingProducts">
                <!-- äº§å“å¡ç‰‡å°†é€šè¿‡ JS åŠ¨æ€åŠ è½½ -->
                <div class="loading-skeleton">
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                </div>
            </div>
            <!-- åŠ è½½æ›´å¤š -->
            <div class="load-more-container" id="loadMoreContainer">
                <button class="load-more-btn" id="loadMoreBtn">åŠ è½½æ›´å¤š</button>
            </div>
        </section>

        <!-- æœ¬å‘¨æ¦œå•åŒº -->
        <section class="section weekly-section" id="weeklySection" style="display: none;">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="title-icon"><i data-lucide="trending-up"></i></span>
                    æœ¬å‘¨ Top 15
                </h2>
                <p class="section-desc">æœ¬å‘¨æœ€å—æ¬¢è¿çš„ AI äº§å“æ¦œå•</p>
            </div>
            <div class="products-list" id="weeklyProducts">
                <!-- äº§å“åˆ—è¡¨å°†é€šè¿‡ JS åŠ¨æ€åŠ è½½ -->
            </div>
        </section>

        <!-- åšå®¢åŠ¨æ€åŒº -->
        <section class="section blogs-section" id="blogsSection" style="display: none;">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="title-icon"><i data-lucide="newspaper"></i></span>
                    åšå®¢ & åŠ¨æ€
                </h2>
                <p class="section-desc">æ¥è‡ª Hacker Newsã€Redditã€Tech Newsã€YouTubeã€X çš„ AI è®¨è®ºå’Œä¸€æ‰‹åŠ¨æ€</p>
            </div>
            <div class="blog-filters" id="blogFilters">
                <button class="blog-filter-btn active" data-source="">å…¨éƒ¨</button>
                <button class="blog-filter-btn" data-source="hackernews">ğŸ”¶ Hacker News</button>
                <button class="blog-filter-btn" data-source="tech_news">ğŸ“° Tech News</button>
                <button class="blog-filter-btn" data-source="youtube">ğŸ“º YouTube</button>
                <button class="blog-filter-btn" data-source="x">ğ• X</button>
                <button class="blog-filter-btn" data-source="reddit">ğŸ”´ Reddit</button>
            </div>
            <div class="blogs-list" id="blogsList">
                <!-- åšå®¢åˆ—è¡¨å°†é€šè¿‡ JS åŠ¨æ€åŠ è½½ -->
            </div>
        </section>

        <!-- è¡Œä¸šé¢†å†›åŒº -->
        <section class="section leaders-section" id="leadersSection" style="display: none;">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="title-icon"><i data-lucide="trophy"></i></span>
                    è¡Œä¸šé¢†å†›
                </h2>
                <p class="section-desc">å·²ç»å¹¿ä¸ºäººçŸ¥çš„æˆç†Ÿ AI äº§å“ï¼Œä¾›ä¸ç†Ÿæ‚‰ AI é¢†åŸŸçš„äººå‚è€ƒå­¦ä¹ </p>
            </div>
            <div class="leaders-note">
                <span class="note-icon">ğŸ’¡</span>
                <span>è¿™äº›äº§å“ä¸ä¼šå‡ºç°åœ¨é»‘é©¬/æ½œåŠ›è‚¡åˆ—è¡¨ä¸­ï¼Œä½†äº†è§£å®ƒä»¬æœ‰åŠ©äºç†è§£ AI è¡Œä¸šæ ¼å±€</span>
            </div>
            <div class="leaders-filters" id="leadersFilters">
                <!-- è¡Œä¸šé¢†å†›ç­›é€‰é¡¹å°†é€šè¿‡ JS åŠ¨æ€åŠ è½½ -->
            </div>
            <div class="leaders-categories" id="leadersCategories">
                <!-- è¡Œä¸šé¢†å†›åˆ†ç±»å°†é€šè¿‡ JS åŠ¨æ€åŠ è½½ -->
                <div class="loading-skeleton">
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                </div>
            </div>
        </section>

        <!-- æœç´¢ç»“æœåŒº -->
        <section class="section search-section" id="searchSection" style="display: none;">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="title-icon"><i data-lucide="search"></i></span>
                    æœç´¢ç»“æœ
                </h2>
                <p class="section-desc" id="searchResultInfo">æ‰¾åˆ° 0 ä¸ªç›¸å…³äº§å“</p>
            </div>
            <div class="products-grid" id="searchResults">
                <!-- æœç´¢ç»“æœå°†é€šè¿‡ JS åŠ¨æ€åŠ è½½ -->
            </div>
        </section>

        <!-- äº§å“è¯¦æƒ…åŒº -->
        <section class="section product-section" id="productSection" style="display: none;">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="title-icon"><i data-lucide="compass"></i></span>
                    äº§å“è¯¦æƒ…
                </h2>
                <p class="section-desc" id="productDetailSubtitle">æ¥è‡ªæœ¬å‘¨ç²¾é€‰</p>
            </div>
            <div class="product-detail" id="productDetail">
                <!-- äº§å“è¯¦æƒ…å°†é€šè¿‡ JS åŠ¨æ€åŠ è½½ -->
            </div>
        </section>
    </main>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="footer-content">
            <p>Â© 2024 WeeklyAI. å‘ç°æ›´å¥½çš„ AI å·¥å…·.</p>
        </div>
    </footer>

    <!-- Product Detail Modal -->
    <div class="modal-overlay" id="productModal" aria-hidden="true">
        <div class="modal-container" role="dialog" aria-labelledby="modalTitle">
            <button class="modal-close" id="modalClose" aria-label="å…³é—­">Ã—</button>
            <div class="modal-content" id="modalContent">
                <!-- Content loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Favorites Panel -->
    <div class="favorites-panel" id="favoritesPanel" aria-hidden="true">
        <div class="favorites-header">
            <h3>â¤ï¸ æˆ‘çš„æ”¶è—</h3>
            <button class="favorites-close" id="favoritesClose">Ã—</button>
        </div>
        <div class="favorites-list" id="favoritesList">
            <!-- Favorites loaded dynamically -->
        </div>
        <div class="favorites-empty" id="favoritesEmpty">
            <p>è¿˜æ²¡æœ‰æ”¶è—ä»»ä½•äº§å“</p>
            <p class="favorites-hint">ç‚¹å‡»äº§å“å¡ç‰‡ä¸Šçš„ â¤ï¸ æŒ‰é’®æ·»åŠ æ”¶è—</p>
        </div>
    </div>

    <!-- Using original main.js (modular version in /js/modules/ for future migration) -->
    <script>
        window.__API_BASE_URL__ = "<%= apiBaseUrl || '' %>";
    </script>
    <script src="/js/main.js"></script>
    <!-- Lazy load p5.js and hero animation after page content is ready -->
    <script>
        (function() {
            // Load p5.js only after DOMContentLoaded and requestIdleCallback
            function loadP5AndHeroArt() {
                var script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js';
                script.onload = function() {
                    var heroScript = document.createElement('script');
                    heroScript.src = '/js/hero-art.js';
                    document.body.appendChild(heroScript);
                };
                document.body.appendChild(script);
            }

            if (document.readyState === 'complete') {
                if ('requestIdleCallback' in window) {
                    requestIdleCallback(loadP5AndHeroArt, { timeout: 2000 });
                } else {
                    setTimeout(loadP5AndHeroArt, 100);
                }
            } else {
                window.addEventListener('load', function() {
                    if ('requestIdleCallback' in window) {
                        requestIdleCallback(loadP5AndHeroArt, { timeout: 2000 });
                    } else {
                        setTimeout(loadP5AndHeroArt, 100);
                    }
                });
            }
        })();
    </script>
</body>

</html>
